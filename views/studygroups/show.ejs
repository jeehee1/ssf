<% layout('layouts/boilerplate') -%>
<div class="container my-5">
  <div class="container">
    <div class="row my-5 justify-content-end">
      <div class="col-2 p-0 mx-2">
        <a
          class="btn btn-warning text-light"
          href="/studygroups/<%=studygroup._id  %>/edit"
          >수정하기</a
        >
      </div>
      <div class="col-2 p-0 mx-2">
        <form
          action="/studygroups/<%=studygroup._id %>?_method=DELETE"
          method="POST"
        >
          <button class="btn btn-danger text-light">삭제</button>
        </form>
      </div>
    </div>
  </div>
  <div class="row">
    <div class="col-6">
      <div class="card">
        <div class="container">
          <div class="row align-items-center my-3">
            <div class="col-10">
              <h1><%= studygroup.title %></h1>
            </div>
            <div class="col-2 align-self-end">
              <p class="text-muted text-end"><%= studygroup.location%></p>
            </div>
          </div>
        </div>
        <img src="<%= studygroup.image %>" />
        <div class="card-body">
          <div class="container">
            <div class="row justify-content-between align-items-center">
              <div class="col-3">
                <p class="m-0">
                  <%= `${studygroup.participants.length}/${studygroup.capacity}`
                  %>
                </p>
              </div>
              <div class="col-3 text-end">
                <p class="btn btn-primary btn-sm m-0">
                  <%= studygroup.subject %>
                </p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="col-6">
      <p><%= studygroup.description%></p>
    </div>
  </div>
  <div class="mt-5">
    <form
      action="/studygroups/<%= studygroup._id %>/comments"
      method="POST"
      class="needs-validation"
      novalidate
    >
      <div class="form-group col-6 offset-3">
        <label class="form-text" for="comment">참여자들의 한마디</label>
        <textarea
          class="form-control my-3"
          name="comment[body]"
          id="comment"
          cols="30"
          rows="3"
          required
        ></textarea>
        <button class="btn btn-success my-3">등록하기</button>
      </div>
    </form>
    <ul>
      <% for(const comment of studygroup.comments){ %>

      <li><div><%= comment.body %> - <%= comment.date.toString() %></div></li>

      <% } %>
    </ul>
  </div>
</div>
